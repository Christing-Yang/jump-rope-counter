<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è·³ç»³è®¡æ•°å™¨ - ç®€åŒ–ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px;
            color: white;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            text-align: center;
        }
        
        .counter-display {
            font-size: 6rem;
            font-weight: bold;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }
        
        .timer-display {
            font-size: 2rem;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 100px;
        }
        
        .start-btn { background: #4CAF50; color: white; }
        .pause-btn { background: #FF9800; color: white; }
        .reset-btn { background: #f44336; color: white; }
        
        .duration-selector {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .duration-btn {
            padding: 8px 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 20px;
            background: transparent;
            color: white;
            cursor: pointer;
        }
        
        .duration-btn.active {
            background: #4CAF50;
            border-color: #4CAF50;
        }
        
        .status {
            margin: 15px 0;
            padding: 10px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>è·³ç»³è®¡æ•°å™¨</h1>
        
        <div class="counter-display" id="counter">0</div>
        <div class="timer-display" id="timer">1:00</div>
        
        <div class="duration-selector" id="durationSelector">
            <button class="duration-btn active" data-seconds="30">30ç§’</button>
            <button class="duration-btn" data-seconds="60">1åˆ†é’Ÿ</button>
            <button class="duration-btn" data-seconds="120">2åˆ†é’Ÿ</button>
            <button class="duration-btn" data-seconds="300">5åˆ†é’Ÿ</button>
        </div>
        
        <div class="status" id="status">å‡†å¤‡å°±ç»ª</div>
        
        <div class="controls">
            <button class="btn start-btn" id="startBtn">å¼€å§‹</button>
            <button class="btn pause-btn" id="pauseBtn" disabled>æš‚åœ</button>
            <button class="btn reset-btn" id="resetBtn">é‡ç½®</button>
        </div>
        
        <div style="margin-top: 20px; font-size: 0.9rem;">
            <p>æ‰‹åŠ¨è®¡æ•°ï¼šç‚¹å‡»å¼€å§‹åï¼Œæ¯è·³ä¸€æ¬¡ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®</p>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let count = 0;
        let totalDuration = 60;
        let remainingTime = 60;
        let isCounting = false;
        let isPaused = false;
        let countdownInterval = null;
        
        // DOMå…ƒç´ 
        const counterDisplay = document.getElementById('counter');
        const timerDisplay = document.getElementById('timer');
        const statusDisplay = document.getElementById('status');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const durationSelector = document.getElementById('durationSelector');
        
        // åˆå§‹åŒ–
        function init() {
            setupEventListeners();
            updateDisplay();
        }
        
        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            startBtn.addEventListener('click', startWorkout);
            pauseBtn.addEventListener('click', togglePause);
            resetBtn.addEventListener('click', resetCounter);
            
            // æ—¶é•¿é€‰æ‹©
            const durationButtons = durationSelector.querySelectorAll('.duration-btn');
            durationButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    durationButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    totalDuration = parseInt(btn.dataset.seconds);
                    remainingTime = totalDuration;
                    updateDisplay();
                });
            });
            
            // æ‰‹åŠ¨è®¡æ•°ï¼ˆç‚¹å‡»å±å¹•ï¼‰
            document.addEventListener('click', (e) => {
                if (isCounting && !isPaused && !e.target.closest('button')) {
                    incrementCounter();
                }
            });
        }
        
        // å¼€å§‹é”»ç‚¼
        function startWorkout() {
            if (isCounting && !isPaused) return;
            
            if (!isCounting) {
                // é‡æ–°å¼€å§‹
                count = 0;
                remainingTime = totalDuration;
                isCounting = true;
                isPaused = false;
            } else {
                // ç»§ç»­æš‚åœçš„é”»ç‚¼
                isPaused = false;
            }
            
            startBtn.disabled = true;
            pauseBtn.disabled = false;
            statusDisplay.textContent = 'è®¡æ•°ä¸­...';
            statusDisplay.style.background = 'rgba(76, 175, 80, 0.3)';
            
            // å¼€å§‹å€’è®¡æ—¶
            startCountdown();
        }
        
        // å¼€å§‹å€’è®¡æ—¶
        function startCountdown() {
            if (countdownInterval) clearInterval(countdownInterval);
            
            countdownInterval = setInterval(() => {
                remainingTime--;
                updateDisplay();
                
                if (remainingTime <= 0) {
                    finishWorkout();
                }
            }, 1000);
        }
        
        // åˆ‡æ¢æš‚åœ/ç»§ç»­
        function togglePause() {
            if (isPaused) {
                // ç»§ç»­
                isPaused = false;
                pauseBtn.textContent = 'æš‚åœ';
                startCountdown();
                statusDisplay.textContent = 'è®¡æ•°ä¸­...';
            } else {
                // æš‚åœ
                isPaused = true;
                pauseBtn.textContent = 'ç»§ç»­';
                if (countdownInterval) clearInterval(countdownInterval);
                statusDisplay.textContent = 'å·²æš‚åœ';
            }
        }
        
        // å®Œæˆé”»ç‚¼
        function finishWorkout() {
            isCounting = false;
            isPaused = false;
            
            if (countdownInterval) clearInterval(countdownInterval);
            
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            pauseBtn.textContent = 'æš‚åœ';
            statusDisplay.textContent = 'å®Œæˆï¼';
            statusDisplay.style.background = 'rgba(255, 255, 255, 0.2)';
            
            alert(`ğŸ‰ è·³ç»³å®Œæˆï¼\næ€»æ¬¡æ•°: ${count}\nå¹³å‡é€Ÿåº¦: ${Math.round((count / totalDuration) * 60)} æ¬¡/åˆ†é’Ÿ`);
        }
        
        // é‡ç½®è®¡æ•°å™¨
        function resetCounter() {
            if (countdownInterval) clearInterval(countdownInterval);
            
            count = 0;
            remainingTime = totalDuration;
            isCounting = false;
            isPaused = false;
            
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            pauseBtn.textContent = 'æš‚åœ';
            statusDisplay.textContent = 'å‡†å¤‡å°±ç»ª';
            statusDisplay.style.background = 'rgba(255, 255, 255, 0.2)';
            
            updateDisplay();
        }
        
        // å¢åŠ è®¡æ•°
        function incrementCounter() {
            count++;
            updateDisplay();
        }
        
        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            counterDisplay.textContent = count;
            
            if (remainingTime <= 0) {
                timerDisplay.textContent = '0:00';
            } else if (remainingTime < 60) {
                timerDisplay.textContent = `${remainingTime}`;
            } else {
                const minutes = Math.floor(remainingTime / 60);
                const seconds = remainingTime % 60;
                timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>